for(i in 1:100){
syn_df <-  read.csv(paste0("~/Desktop/github/private-pgm/data/exp",i,"/synth_data.csv"))
for(j in 1:100){
samp <- sample(nrow(syn_df), nrow(syn_df), replace = T)
write.csv(syn_df[samp,], paste0("~/Desktop/github/private-pgm/data/exp",i,"/boot",j,".csv"), row.names = F)
}
}
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_data
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
j <- 1
for(j in 1:20){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
res <- coef(synth_reg)[2]
#   for(i in 2:100){
#
# synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/out",i,".csv"))
# synth_reg <-
#   glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
# res <- rbind(res, coef(synth_reg)[2])
#
#   }
#
#   boot_dists[[j]] <- res
}
warnings()
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:100){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
res <- coef(synth_reg)[2]
#   for(i in 2:100){
#
# synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/out",i,".csv"))
# synth_reg <-
#   glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
# res <- rbind(res, coef(synth_reg)[2])
#
#   }
#
#   boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:100){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
res <- coef(synth_reg)[2]
#   for(i in 2:100){
#
# synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/out",i,".csv"))
# synth_reg <-
#   glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
# res <- rbind(res, coef(synth_reg)[2])
#
#   }
#
#   boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
orig_cis
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
synth_reg
confint(synth_reg)[2,]
summary(synth_reg)
tryCatch(confint(synth_reg)[2,])
tryCatch(confint(synth_reg)[2,], c(0, 0))
?tryCatch
tryCatch(confint(synth_reg)[2,], finally= c(0, 0))
tryCatch(confint(synth_reg)[2,], error= c(0, 0))
tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)})
tryCatch(confint(orig_reg)[2,], error= function(cond){ c(0, 0)})
tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)})
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:100){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
#   for(i in 2:100){
#
# synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/out",i,".csv"))
# synth_reg <-
#   glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
# res <- rbind(res, coef(synth_reg)[2])
#
#   }
#
#   boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:3){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
#   boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975))), true_pop_mean = 1.5, xlim = c(0, 3))
boot_dists
boot_dists
boot_dists
boot_dists
boot_dists
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:3){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975))), true_pop_mean = 1.5, xlim = c(0, 3))
boot_dists
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-10, 10))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-100, 100))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:15){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-100, 100))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:70){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-100, 100))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:100){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-100, 100))
eps <- 1
# Sample original data from population parameters
for(i in 1:100){
orig_data <- sample_logit_data(betas, n_data)
dir.create(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i))
write.csv(orig_data, paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/logit.csv"), row.names = F)
}
# Sample original data from population parameters
for(i in 1:100){
orig_data <- sample_logit_data(betas, n_data)
dir.create(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i),recursive = T)
write.csv(orig_data, paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/logit.csv"), row.names = F)
}
for(i in 1:100){
syn_df <-  read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps",/exp",i,"/synth_data.csv"))
for(j in 1:100){
samp <- sample(nrow(syn_df), nrow(syn_df), replace = T)
write.csv(syn_df[samp,], paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/boot",j,".csv"), row.names = F)
}
}
for(i in 1:100){
syn_df <-  read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/synth_data.csv"))
for(j in 1:100){
samp <- sample(nrow(syn_df), nrow(syn_df), replace = T)
write.csv(syn_df[samp,], paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/boot",j,".csv"), row.names = F)
}
}
eps
for(i in 1:100){
syn_df <-  read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/synth_data.csv"))
for(j in 1:100){
samp <- sample(nrow(syn_df), nrow(syn_df), replace = T)
write.csv(syn_df[samp,], paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",i,"/boot",j,".csv"), row.names = F)
}
}
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:30){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
?tryCatch
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
for(j in 1:30){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(0, 3))
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
eps <- "01"
for(j in 1:1000){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(0, 3))
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-5, 5))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Original Data")
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-5, 5), label = "Bootstrap")
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
eps <- "1"
for(j in 1:35){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-5, 5), label = "Bootstrap")
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(0, 3), label = "Bootstrap")
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
eps <- "01"
for(j in 1:100){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-50, 50), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-50, 3), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-50, 50), label = "Bootstrap")
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-50, 50), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-50, 50), label = "Bootstrap")
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-50, 50), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(-50, 50), label = "Bootstrap")
orig_cis <- NULL
naive_cis <- NULL
boot_dists <- vector(mode ="list")
eps <- "1"
for(j in 1:100){
orig_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/logit.csv"))
orig_reg <-
glm(y ~ x, data = orig_data, family = binomial(link = "logit"))
orig_cis <- rbind(orig_cis, confint(orig_reg)[2,])
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_data.csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
summary(synth_reg)
#naive_cis <- rbind(naive_cis, confint(synth_reg)[2,])
naive_cis <- rbind(naive_cis, tryCatch(confint(synth_reg)[2,], error= function(cond){ c(0, 0)}))
res <- coef(synth_reg)[2]
for(i in 1:100){
synth_data <- read.csv(paste0("~/Desktop/github/private-pgm/data/epsilon_",eps,"/exp",j,"/synth_boot",i,".csv"))
synth_reg <-
glm(y ~ x, data = synth_data, family = binomial(link = "logit"))
res <- rbind(res, coef(synth_reg)[2])
}
#
boot_dists[[j]] <- res
}
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(-5, 5), label = "Original Data")
par(mfrow = c(1, 3))
plot_cis(d = orig_cis, true_pop_mean = 1.5, xlim = c(0, 3), label = "Original Data")
plot_cis(d = naive_cis, true_pop_mean = 1.5, xlim = c(0, 3), label = "Naive CI on Synthetic Data")
plot_cis(d = t(sapply(boot_dists, quantile, c(0.025, 0.975), na.rm = T)), true_pop_mean = 1.5, xlim = c(0, 3), label = "Bootstrap")
